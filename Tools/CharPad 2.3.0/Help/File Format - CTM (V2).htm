<html>
<head>
<title>CharPad 2.3 User Manual</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body text="#000000" link="#0000ff" vlink="#0000ff">

<img src="icon48.png" width=96 height=96>
<p><a href="Contents.htm">&lt;&lt; Back to contents.</a> 
<p><b>CharPad 2.3 User Manual - Subchrist Software, 2019.</b>


<p><b>CTM File Format, Version 2.</b> 
<br><br>
<p>Used by CharPad 1.7 to record project data.

<p>First comes the header, 20 bytes...
<br><br>
<table>
<tr><td>ID_STR    <td>[00-02] <td>: 3 bytes <td>: File ID string (ASCII) "CTM".
<tr><td>VERSION   <td>[03]    <td>: 1 byte  <td>: Format version number (2).
<tr><td>COLOURS   <td>[04-07] <td>: 4 bytes <td>: Screen colour, Char multi-colour 1, Char multi-colour 2, Char colour.
<tr><td>COLR_METH <td>[08]    <td>: 1 byte  <td>: Colouring method (0 = Global, 1 = Per-tile, 2 = Per-tile-cell).
<tr><td>MCMODE    <td>[09]    <td>: 1 byte  <td>: Char multi-colour mode flag (1 = Yes).
<tr><td>MAP_WID   <td>[10-11] <td>: 2 bytes <td>: Map width (16 bits).
<tr><td>MAP_HEI   <td>[12-13] <td>: 2 bytes <td>: Map height (16 bits).
<tr><td>NUM_CHARS <td>[14-15] <td>: 2 bytes <td>: Character image quantity -1 (16 bits).
<tr><td>NUM_TILES <td>[16]    <td>: 1 byte  <td>: Tile quantity -1.
<tr><td>TILE_SZ   <td>[17]    <td>: 1 byte  <td>: Tile size (1-5).
<tr><td>RESERVED  <td>[18-19] <td>: 2 bytes <td>: Unused.
</table>

<p>Then comes the data...
<br><br>
<table>
<tr><td>CHAR_DATA    <td>: NUM_CHARS * 9 bytes.                           <td>: Character image data (one byte per pixel row, each 9th byte holds a 'material' value).
<tr><td>TILE_DATA    <td>: NUM_TILES * TILE_SZ * TILE_SZ bytes * 2 bytes. <td>: Tile data (16 bits per tile cell).
<tr><td>TILE_COLOURS <td>: NUM_TILES bytes.                               <td>: Tile colour data (one byte per tile, only exists if COLR_METH = 1).
<tr><td>CELL_COLOURS <td>: NUM_TILES * TILE_SIZE * TILE_SIZE bytes.       <td>: Tile cell colour data (one byte per tile cell, only exists if COLR_METH = 2).
<tr><td>MAP_DATA     <td>: MAP_WID * MAP_HEI bytes.                       <td>: Map data.
</table>


<br>
<p><b>Notes...</b>

<p>16-bit values should always be interpreted as least significant byte first (LSBF).
<p>The data for each character image (CHAR_DATA) consists of eight rows of pixels (one byte per row) starting with the top row, each 9th byte contains a material value (0-15).
<p>The data for each tile (TILE_DATA, CELL_COLOURS) begins with the tile's top-left element and runs left-to-right, top-to-bottom (Z-pattern LRTB).
<p>The data for the map (MAP_DATA) begins with the map's top-left element and runs left-to-right, top-to-bottom (Z-pattern LRTB).


<br><br>
<p><b>Changes...</b>

<p>This version of the CTM file format enhances the previous version by including support for a 16-bit character count (up to 65536 character images),
the tile data is now (necessarily) 16-bit and tile sizes are now variable between 1x1 and 5x5 (square sizes only).

<p>Also added is an attribute byte along with each character image, CharPad 1.7 uses these to store character
'material' values (0-3).


<br><br>
<p><b>File format limitations...</b>
<br><br>
<table>
<tr><td>Max character images <td>: 65536
<tr><td>Max tiles            <td>: 256
<tr><td>Max maps             <td>: 1
<tr><td>Max tile size        <td>: 255 x 255 (square only).
<tr><td>Max map width        <td>: 65535
<tr><td>Max map height       <td>: 65535
</table>


<br> 
<p><b>CharPad 1.7 limitations...</b>
<br><br>
<table> 
<tr><td>Max character images <td>: 6400 (256 x 5 x 5).
<tr><td>Max tiles            <td>: 256
<tr><td>Max maps             <td>: 1
<tr><td>Max tile size        <td>: 5 x 5 (square only).
<tr><td>Max map width        <td>: 4096
<tr><td>Max map height       <td>: 4096
</table>


<br>
<p><b>See also:-</b>
<br> 
<br><a href="File Format - CTM (V1).htm">CTM File Format, Version 1.</a>
<br><a href="File Format - CTM (V3).htm">CTM File Format, Version 3.</a>
<br><a href="File Format - CTM (V4).htm">CTM File Format, Version 4.</a>
<br><a href="File Format - CTM (V5).htm">CTM File Format, Version 5.</a>

<br><br><br><br><br><br><br><br><br><br>

</body>
</html>













